<html>
<head>
    <title>使用Apache的ab进行压力测试</title>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushCpp.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushSql.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushPython.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushCss.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushJava.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushPowerShell.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushBash.js"></script>
	<script type="text/javascript" src="../syntaxhighlighter_3.0.83/scripts/shBrushXml.js"></script>

	<link rel="Stylesheet" type="text/css" href="../stylesheets/stylesheet.css" />
	<link type="text/css" rel="stylesheet" href="../syntaxhighlighter_3.0.83/styles/shCoreDefault.css" />
	<link type="text/css" rel="Stylesheet" href="../syntaxhighlighter_3.0.83/styles/shThemeMidnight.css" />
	<script type="text/javascript">SyntaxHighlighter.all();</script>
</head>
<body>
    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Yanam">View on GitHub</a>

          <h1 id="project_title">胡诌</h1>
          <h2 id="project_tagline"></h2>

        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">

<div class="toc">
<ul>
<li><a href="#toc_0.1">前言</a>
<li><a href="#toc_0.2">使用</a>
</ul>
</ul>
</div>


<h2 id="toc_0.1">前言</h2>
<p>
最近做的异步消息模块主要功能基本完成，但一直对性能好坏没底，想着做个压测看看效果如何。开发人员嘛，压测工具肯定选简单好用的，越省事越好，这不就想到ab了。
<code>ab</code> is a tool for benchmarking your http server.<a href="http://httpd.apache.org/docs/2.4/programs/ab.html">官网</a>
</p>

<p>
ab简单好用，非常适合开发人员进行压力测试，以前也用过但隔得时间久了已经忘得一干二净，正好借这次机会记录一下。
</p>
<h2 id="toc_0.2">使用</h2>
<p>
1）安装
</p>
  
<p>
  ab作为apache http 服务器的一部分，安装好apache服务器就行了。
</p>

<p>
  我一般就用直接下载gz包然后解压安装，觉得这个麻烦的话可以这样：
  ubuntu 可以使用这个命令：<code>apt-get install apache2-utils</code>
  centos 可以使用这个命令：<code>yum install httpd-tools</code>
</p>

<p>
  安装好后，就可以看到bin目录下的ab目录了。
</p>

<p>
2）使用
  测试自己是否安装好了，可以去apache的bin目录（比如我的就是/data/httpd-2.2.27/bin）下执行<code>./ab -V</code> 看是否能正确执行。
</p>

<p>
示例：
</p>
<pre class="brush:shell">
./ab -k -n 1 -p /root/temp.txt -T 'text/plain' http://172.30.204.180:9765/test

# get 请求的给url加上双引号就行了
./ab -k -n 1 -c 1"http://172.30.204.180:8080/test?a=1&amp;b=2" 

</pre>

<ol>
<li>
<code>-n</code> 是请求总数

<li>
<code>-c</code> 是并发总数

<li>
<code>-k</code> 是保持连接

</ol>

<hr />
<p>
<code>日期</code>：2014-07-11、2014-08-12
</p>

<p>
<code>参考资料</code>：<a href="http://www.oschina.net/question/123890_28974">The timeout specified has expired (70007)的问题</a>、<a href="http://blog.miniasp.com/post/2009/10/Explain-ApacheBench-ab-for-the-Failed-request-field.aspx">Failed requests的问题</a>
</p>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>
</body>
</html>
